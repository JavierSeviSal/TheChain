<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>The Chain â€” FCM Solo Automa</title>
    <link rel="stylesheet" href="/static/css/style.css?v=28">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”—</text></svg>">
</head>
<body>
    <!-- â”€â”€â”€ Top Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <header id="top-bar">
        <div class="bar-left">
            <h1 class="logo">ğŸ”— The Chain</h1>
            <span id="turn-badge" class="badge">Turn 0</span>
            <span id="phase-badge" class="badge phase">Setup</span>
        </div>
        <div class="bar-right">
            <button id="btn-lang" class="icon-btn" title="Language">EN</button>
            <button id="btn-mode" class="icon-btn" title="Mode">Full</button>
            <button id="btn-undo" class="icon-btn" title="Undo">â†©</button>
            <button id="btn-save" class="icon-btn" title="Save">ğŸ’¾</button>
            <button id="btn-menu" class="icon-btn" title="Menu">â˜°</button>
        </div>
    </header>

    <!-- â”€â”€â”€ Menu Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="menu-overlay" class="overlay hidden">
        <div class="overlay-content menu-panel">
            <h2 data-i18n="menu">Menu</h2>
            <button id="btn-new-game" class="menu-btn" data-i18n="new_game">New Game</button>
            <button id="btn-save-game" class="menu-btn" data-i18n="save_game">Save Game</button>
            <button id="btn-load-game" class="menu-btn" data-i18n="load_game">Load Game</button>
            <button id="btn-bank-break" class="menu-btn warn" data-i18n="bank_break">Bank Break!</button>
            <button id="btn-close-menu" class="menu-btn muted" data-i18n="close">Close</button>
        </div>
    </div>

    <!-- â”€â”€â”€ New Game Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="newgame-overlay" class="overlay hidden">
        <div class="overlay-content setup-panel">
            <h2 data-i18n="new_game_setup">New Game Setup</h2>

            <div class="setup-tabs">
                <button id="btn-tab-individual" class="tab-btn active" data-i18n="tab_individual">Individual Options</button>
                <button id="btn-tab-scenarios" class="tab-btn" data-i18n="tab_scenarios">Pre-set Scenarios</button>
            </div>

            <!-- Scenario View -->
            <div id="scenario-view" class="hidden">
                <p class="scenario-hint" data-i18n="scenario_hint">Pick a scenario to pre-fill modules &amp; options. You can tweak them after.</p>
                <div id="scenario-list" class="scenario-list"></div>
            </div>

            <!-- Individual Options View -->
            <div id="individual-view">
            <h3 data-i18n="modules">Expansion Modules</h3>
            <div class="module-actions">
                <button type="button" id="btn-enable-all" class="small-btn" data-i18n="enable_all">Enable All</button>
                <button type="button" id="btn-disable-all" class="small-btn" data-i18n="disable_all">Disable All</button>
            </div>
            <div class="toggle-grid" id="modules-grid">
                <label><input type="checkbox" id="mod-coffee"> â˜• <span data-i18n="mod_coffee">Coffee</span></label>
                <label><input type="checkbox" id="mod-kimchi"> ğŸ¥¬ <span data-i18n="mod_kimchi">Kimchi</span></label>
                <label><input type="checkbox" id="mod-noodle"> ğŸœ <span data-i18n="mod_noodle">Noodle</span></label>
                <label><input type="checkbox" id="mod-sushi"> ğŸ£ <span data-i18n="mod_sushi">Sushi</span></label>
                <label><input type="checkbox" id="mod-gourmet"> ğŸ½ï¸ <span data-i18n="mod_gourmet">Gourmet Food Critic</span></label>
                <label><input type="checkbox" id="mod-mass-marketeer"> ğŸ“¢ <span data-i18n="mod_mass_marketeer">Mass Marketeer</span></label>
                <label><input type="checkbox" id="mod-rural-marketeer"> ğŸŒ¾ <span data-i18n="mod_rural_marketeer">Rural Marketeer</span></label>
                <label><input type="checkbox" id="mod-night-shift"> ğŸŒ™ <span data-i18n="mod_night_shift">Night Shift Manager</span></label>
                <label><input type="checkbox" id="mod-ketchup"> ğŸ¥« <span data-i18n="mod_ketchup">Ketchup</span></label>
                <label><input type="checkbox" id="mod-fry-chefs"> ğŸŸ <span data-i18n="mod_fry_chefs">Fry Chefs</span></label>
                <label><input type="checkbox" id="mod-movie-stars"> ğŸ¬ <span data-i18n="mod_movie_stars">Movie Stars</span></label>
                <label><input type="checkbox" id="mod-reserve-prices"> ğŸ’° <span data-i18n="mod_reserve_prices">Reserve Prices</span></label>
                <label><input type="checkbox" id="mod-lobbyists"> ğŸ›ï¸ <span data-i18n="mod_lobbyists">Lobbyists</span></label>
                <label><input type="checkbox" id="mod-new-districts"> ğŸ˜ï¸ <span data-i18n="mod_new_districts">New Districts</span></label>
                <label><input type="checkbox" id="mod-milestones"> ğŸ† <span data-i18n="mod_milestones">Milestones</span></label>
            </div>

            <h3 data-i18n="difficulty">Difficulty Options</h3>
            <div class="toggle-grid">
                <label><input type="checkbox" id="opt-hard-choices"> Hard Choices</label>
                <label><input type="checkbox" id="opt-expand-connections"> Expand Connections</label>
                <label><input type="checkbox" id="opt-expand-6"> 6 Restaurants</label>
                <label><input type="checkbox" id="opt-aggressive-setup"> Aggressive Setup</label>
                <label><input type="checkbox" id="opt-aggressive-restructuring"> Aggressive Restructuring</label>
            </div>

            <h3 data-i18n="game_mode">Game Mode</h3>
            <div class="toggle-grid">
                <label><input type="radio" name="mode" value="full" checked> ğŸ¯ Full Automation</label>
                <label><input type="radio" name="mode" value="quick"> âš¡ Quick Mode</label>
            </div>

            </div><!-- /individual-view -->

            <div class="setup-actions">
                <button id="btn-start-game" class="primary-btn" data-i18n="start_game">Start Game</button>
                <button id="btn-cancel-setup" class="muted-btn" data-i18n="cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- â”€â”€â”€ Load Game Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="load-overlay" class="overlay hidden">
        <div class="overlay-content">
            <h2 data-i18n="load_game">Load Game</h2>
            <div id="saves-list" class="saves-list"></div>
            <button id="btn-close-load" class="muted-btn" data-i18n="close">Close</button>
        </div>
    </div>

    <!-- â”€â”€â”€ Card Zoom Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="card-overlay" class="overlay hidden">
        <img id="card-zoom-img" src="" alt="Card">
        <button id="btn-close-card" class="close-card-btn">âœ•</button>
    </div>

    <!-- â”€â”€â”€ Reserve Card Reveal Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="reserve-reveal-overlay" class="overlay hidden" onclick="closeReserveReveal()">
        <div class="reserve-reveal-content" onclick="event.stopPropagation()">
            <div class="reserve-reveal-header">ğŸ¦ The Chain's Bank Reserve</div>
            <p class="reserve-reveal-sub">The bank card secretly chosen at the start of this game wasâ€¦</p>
            <img id="reserve-reveal-img" src="" alt="Reserve card" class="reserve-reveal-img">
            <button class="primary-btn" onclick="closeReserveReveal()">Got it</button>
        </div>
    </div>

    <!-- â”€â”€â”€ Input Overlay (for player prompts) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="input-overlay" class="overlay hidden">
        <div class="overlay-content input-panel">
            <h3 id="input-prompt"></h3>
            <div id="input-fields"></div>
            <button id="btn-submit-input" class="primary-btn" data-i18n="confirm">Confirm</button>
        </div>
    </div>

    <!-- â”€â”€â”€ Main Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <main id="main-content">
        <!-- Welcome screen (before game starts) -->
        <section id="welcome-screen">
            <div class="welcome-box">
                <h2>ğŸ”— The Chain</h2>
                <p data-i18n="welcome_desc">Solo Automa Companion for Food Chain Magnate</p>
                <button id="btn-welcome-new" class="primary-btn large" data-i18n="new_game">New Game</button>
                <button id="btn-welcome-load" class="muted-btn" data-i18n="load_game">Load Game</button>
            </div>
        </section>

        <!-- Game screen -->
        <section id="game-screen" class="hidden">
            <!-- Cards Row -->
            <div class="cards-row">
                <div class="card-slot" id="back-card-slot">
                    <div class="card-label" data-i18n="food_cleanup">Food & Cleanup</div>
                    <img id="back-card-img" class="card-img" src="/static/cards/placeholder.png" alt="Back card"
                         data-side="back" loading="lazy">
                </div>
                <div class="card-slot" id="front-card-slot">
                    <div class="card-label" data-i18n="recruit_train">Recruit & Train</div>
                    <img id="front-card-img" class="card-img" src="/static/cards/placeholder.png" alt="Front card"
                         data-side="front" loading="lazy">
                </div>
                <div class="card-slot comp-card-slot hidden" id="comp-card-slot">
                    <div class="card-label" id="comp-card-label">Competition</div>
                    <img id="comp-card-img" class="card-img" src="/static/cards/placeholder.png" alt="Competition card"
                         loading="lazy">
                </div>
            </div>

            <!-- Action Button -->
            <div class="action-row">
                <button id="btn-advance" class="primary-btn large pulse" data-i18n="next_phase">
                    Next Phase â–¶
                </button>
            </div>

            <!-- Status Message -->
            <div id="status-msg" class="status-msg"></div>

            <!-- Tracks Panel -->
            <div class="panel tracks-panel">
                <h3 data-i18n="tracks">Tracks</h3>
                <div class="tracks-grid">
                    <div class="track" id="track-rt">
                        <span class="track-name" data-i18n="recruit_train_short">R&T</span>
                        <div class="track-bars-group">
                            <div class="track-bar">
                                <div class="track-markers" id="rt-markers"></div>
                            </div>
                            <div class="track-bar track-sub-bar">
                                <div class="track-markers sub-markers" id="rt-food-markers"></div>
                            </div>
                        </div>
                        <div class="track-value-group" id="rt-value-group">
                            <span class="tv-slots" id="rt-slots-value">1</span>
                            <span class="tv-food" id="rt-food-value">Ã—2</span>
                        </div>
                        <span class="track-info" id="rt-info"></span>
                    </div>
                    <div class="track" id="track-pd">
                        <span class="track-name" data-i18n="price_distance">Price+Dist</span>
                        <div class="track-bar">
                            <div class="track-markers" id="pd-markers"></div>
                        </div>
                        <span class="track-value" id="pd-value">10</span>
                    </div>
                    <div class="track" id="track-wait">
                        <span class="track-name" data-i18n="waitresses">Waitresses</span>
                        <div class="track-bar">
                            <div class="track-markers" id="wait-markers"></div>
                        </div>
                        <span class="track-value" id="wait-value">0</span>
                    </div>
                    <div class="track competition-track" id="track-comp">
                        <span class="track-name" data-i18n="competition">Competition</span>
                        <div class="comp-indicator" id="comp-indicator">
                            <span class="comp-level" data-level="0">Cold</span>
                            <span class="comp-level" data-level="1">Cool</span>
                            <span class="comp-level active" data-level="2">Neutral</span>
                            <span class="comp-level" data-level="3">Warm</span>
                            <span class="comp-level" data-level="4">Hot</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory Panel -->
            <div class="panel inventory-panel">
                <h3 data-i18n="inventory">Inventory</h3>
                <div class="inv-grid" id="inv-grid"></div>
            </div>

            <!-- Info Panel (marketeers, employees, milestones) -->
            <div class="panel info-panel">
                <div class="info-section">
                    <h4 data-i18n="marketeers">Marketeers</h4>
                    <div id="marketeer-slots" class="slot-row"></div>
                </div>
                <div class="info-section">
                    <h4 data-i18n="employees">Employees</h4>
                    <div id="employee-list" class="tag-list"></div>
                </div>
                <div class="info-section">
                    <h4>ğŸ† <span data-i18n="milestones">Milestones</span></h4>
                    <div id="milestone-list" class="tag-list"></div>
                </div>
                <div class="info-section">
                    <h4>ğŸ½ï¸ <span data-i18n="restaurants">Restaurants</span></h4>
                    <div id="restaurant-list" class="tag-list"></div>
                </div>
                <div class="info-section">
                    <div class="cash-display">
                        <div class="cash-label">ğŸ’° <span data-i18n="chain_cash">Chain Cash</span></div>
                        <div class="cash-total" id="chain-cash-total">$0</div>
                        <div class="cash-turn" id="chain-cash-turn"></div>
                    </div>
                </div>
                <div class="info-section">
                    <h4>ğŸ“Š <span data-i18n="deck_info">Deck</span></h4>
                    <div id="deck-info" class="deck-info"></div>
                </div>
            </div>

            <!-- Action Log -->
            <div class="panel log-panel">
                <h3 data-i18n="action_log">Action Log</h3>
                <div id="action-log" class="log-scroll"></div>
            </div>

            <!-- Quick Mode Controls (hidden in full mode) -->
            <div id="quick-controls" class="panel quick-panel hidden">
                <h3 data-i18n="quick_controls">Quick Controls</h3>
                <button id="btn-quick-draw" class="primary-btn" data-i18n="draw_card">Draw Card</button>
                <div class="quick-tracks">
                    <label>R&T: <input type="number" id="qtrack-rt" min="1" max="4" value="1" class="track-input"></label>
                    <label>P+D: <input type="number" id="qtrack-pd" min="6" max="10" value="10" class="track-input"></label>
                    <label>Wait: <input type="number" id="qtrack-wait" min="0" max="4" value="0" class="track-input"></label>
                    <label>Comp: <select id="qtrack-comp" class="track-input">
                        <option value="0">Cold</option>
                        <option value="1">Cool</option>
                        <option value="2" selected>Neutral</option>
                        <option value="3">Warm</option>
                        <option value="4">Hot</option>
                    </select></label>
                </div>
                <button id="btn-quick-update" class="muted-btn" data-i18n="update_tracks">Update Tracks</button>
            </div>
        </section>
    </main>

    <script src="/static/js/i18n.js?v=23"></script>
    <script src="/static/js/app.js?v=25"></script>
</body>
</html>
